

@using System.IO
@using System.Linq.Expressions

@using WebHome.Helper
@using WebHome.Models.Locale
@using WebHome.Models.ViewModel
@using WebHome.Models.DataEntity
@using WebHome.Controllers
@using Microsoft.AspNetCore.Mvc.ModelBinding
@using Newtonsoft.Json
@{
    ModelSource<UserProfile> models;
    ModelStateDictionary _modelState;
    Payment _model;
    PaymentViewModel _viewModel;

    models = (ModelSource<UserProfile>)ViewContext.HttpContext.Items["Models"]; ;
    _modelState = ViewContext.ModelState;
    _model = this.Model as Payment;
    _viewModel = (PaymentViewModel)ViewBag.ViewModel;
}
@{
    UserProfile _profile = await Context.GetUserAsync();
}
@if (!_viewModel.SellerID.HasValue)
{
    <div class="col-12">
        <select class="form-control show-tick" name="SellerID">
            <option value="">-- 請選擇收款場地 --</option>
            @{
                ViewBag.DataItems = models.PromptRealStore();
                await Html.RenderPartialAsync("~/Views/SystemInfo/BranchStoreOptions.cshtml", model: -1);
            }
        </select>
        @*<label class="material-icons help-error-text" for="BranchID">clear 請選擇收款場地</label>*@
    </div>
}
<div class="col-12">
    <select class="form-control show-tick" name="PaymentType">
        <option value="">-- 請選擇收款方式 --</option>
        <option value="現金">現金</option>
        <option value="刷卡">刷卡</option>
        <option value="轉帳">轉帳</option>
    </select>
</div>
<div class="col-12">
    <div class="input-group">
        @{
            ViewBag.SearchAction = Url.Action("SearchPayer", "LearnerProfile");
            ViewBag.SearchField = "PayerName";
            await Html.RenderPartialAsync("~/Views/ConsoleEvent/Module/SearchLearner.cshtml");
        }
    </div>
</div>
<div class="col-12">
    <div class="input-group">
        <input type="text" class="form-control" name="BuyerReceiptNo" placeholder="買受人統編" />
        <span class="input-group-addon">
            <i class="zmdi zmdi-text-format"></i>
        </span>
    </div>
</div>
<div class="col-12">
    <select class="form-control show-tick" name="CarrierType">
        <option value="">-- 請選擇載具 --</option>
        @*<option value="3J0001">會員載具</option>*@
        <option value="3J0002">手機載具</option>
        <!-- <option value="1">紙本</option> -->
    </select>
</div>
<div class="col-lg-8 col-md-8 col-sm-12 eInvoice-dialog">
    <div class="input-group">
        <input type="text" class="form-control col-red" name="CarrierId1" placeholder="手機載具條碼，例：/17T448Q" value="@(_viewModel.CarrierId1)" />
        <span class="input-group-addon">
            <i class="zmdi zmdi-money-box"></i>
        </span>
    </div>
</div>
<div class="col-lg-4 col-md-4 col-sm-12">
    <label class="fancy-checkbox custom-bgcolor-green">
        <input type="checkbox" name="MyCarrier" value="True" />
        <span class="col-green">加入預設</span>
    </label>
</div>
<div class="col-12 eInvoice-dialog">
    <dv>
        <input type="hidden" name="errorMessage" />
    </dv>
</div>