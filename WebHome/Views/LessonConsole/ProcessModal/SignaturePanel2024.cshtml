
@using System.IO
@using System.Linq.Expressions

@using WebHome.Helper
@using WebHome.Models.Locale
@using WebHome.Models.ViewModel
@using WebHome.Models.DataEntity
@using WebHome.Controllers
@using Microsoft.AspNetCore.Mvc.ModelBinding
@using Newtonsoft.Json
@{

    ModelStateDictionary _modelState;
    ModelSource<UserProfile> models;
    String _dialogID = $"signature{DateTime.Now.Ticks}";
    QueryViewModel _viewModel;

    _modelState = ViewContext.ModelState;
    models = (ModelSource<UserProfile>)ViewContext.HttpContext.Items["Models"]; ;
    _viewModel = (QueryViewModel)ViewBag.ViewModel;
}
<div class="modal fade" id="@(_dialogID)" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5>èª²å‰å¥åº·æŒ‡æ•¸</h5>
                <a class="closebutton" data-dismiss="modal"></a>
            </div>
            <a class="closebutton" data-dismiss="modal"></a>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12 col-lg-6 col-md-12">
                        <div class="row clearfix">
                            <div class="col-12 col-lg-4 col-md-5">ç¡çœ æ™‚é–“</div>
                            <div class="col-12 col-lg-8 col-md-7">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-danger" placeholder="å°æ™‚" name="SleepDuration" />
                                    <span class="input-group-addon">
                                        <i class="zmdi zmdi-hourglass-alt"></i>
                                    </span>
                                </div>
                                <label class="material-icons help-error-text">clear è«‹è¼¸å…¥ç¡çœ æ™‚é–“</label>
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-12 col-lg-4 col-md-5">æ”å–æ°´åˆ† <i class="zmdi zmdi-info-outline col-blue"></i></div>
                            <div class="col-12 col-lg-8 col-md-7">
                                <select class="form-control show-tick" name="WaterIntake">
                                    <option value="" disabled selected>è¿‘8å°æ™‚æ°´åˆ†æ”å–</option>
                                    <option value="1">æ¥µåº¦ç¼ºä¹(ç›®å‰é¦¬ä¸Šè£œå……ä¹Ÿé‚„æ˜¯ç¼ºä¹)</option>
                                    <option value="2">æœ‰é»ç¼ºä¹(å³æ™‚è£œå……å¯ä»¥æ¥è¿‘æ­£å¸¸ç‹€æ…‹)</option>
                                    <option value="3">åŠæ ¼(å·®ä¸å¤šæ­£å¸¸)</option>
                                    <option value="4">è‰¯å¥½(æœ‰è£œå……ä¸¦ä¸”æœ‰å¤šæ”å–ä¸€äº›)</option>
                                </select>
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-danger" placeholder="cc">
                                    <span class="input-group-addon">
                                        <i class="zmdi zmdi-drink"></i>
                                    </span>
                                </div>
                                <label class="material-icons help-error-text">clear è«‹è¼¸å…¥æ”å–æ°´åˆ†</label>
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-12 col-lg-4 col-md-5">å¿ƒç†å£“åŠ› <i class="zmdi zmdi-info-outline col-blue"></i></div>
                            <div class="col-12 col-lg-8 col-md-7">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-danger" placeholder="1-10" name="FatigueIndex" />
                                    <span class="input-group-addon">
                                        <i class="zmdi zmdi-favorite"></i>
                                    </span>
                                </div>
                                <label class="material-icons help-error-text">clear è«‹è¼¸å…¥å¿ƒç†å£“åŠ›</label>
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-lg-4 col-lg-4 col-md-5">ç”Ÿç†ç–²å‹ <i class="zmdi zmdi-info-outline col-blue"></i></div>
                            <div class="col-12 col-lg-8 col-md-7">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-danger" placeholder="1-10" name="StressIndex" />
                                    <span class="input-group-addon">
                                        <i class="zmdi zmdi-hospital"></i>
                                    </span>
                                </div>
                                <label class="material-icons help-error-text">clear è«‹è¼¸å…¥ç”Ÿç†ç–²å‹</label>
                            </div>
                        </div>
                        <div class="row clearfix m-t-10">
                            <div class="col-12">
                                <div class="input-group">
                                    <textarea rows="3" class="form-control no-resize" placeholder="è«‹è¼¸å…¥ä»»ä½•æƒ³è£œå……ä¹‹å¥åº·äº‹é …..." name="SupplementaryStatement"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 col-md-12">
                        <div class="row clearfix">
                            <div class="col-12">
                                <label class="fancy-radio custom-color-pink">
                                    <input name="CheckTerms" value="true" type="radio" id="checkTerms" onclick="return false;" />
                                    <span><i></i><a href="javascript:showHealthyTerms();" class="col-red"><u>èª²å‰å¥åº·ç‹€æ³è‡ªæˆ‘æª¢è¦–è²æ˜æ›¸</u></a></span>
                                </label>
                            </div>
                            <div class="col-12">
                                <label class="fancy-radio custom-color-pink">
                                    <input name="Agree" value="true" type="radio" id="agree" onclick="return false;" />
                                    <span><i></i>æœ¬äººè¬¹æ­¤è²æ˜ä¸Šè¿°å€‹äººèº«é«”å¥åº·ç‹€æ³äº‹é …ï¼Œä¸¦ç«‹æ­¤åˆ‡çµæ›¸ä»¥è³‡è­‰æ˜ã€‚</span>
                                </label>
                            </div>
                            <!-- <div class="col-12 text-right">
                                <img src="images/sign/sabrina-sign.png" width="400px" />
                            </div> -->
                        </div>
                        <div id="signatureparent">
                            <div id="signature"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-darkteal btn-round waves-effect btnConfirm">ç¢ºå®šï¼Œä¸å¾Œæ‚”</button>
                <button type="button"
                        class="btn btn-danger btn-round btn-simple btn-round waves-effect waves-red resign">
                    é‡æ–°ç°½å
                </button>
            </div>
        </div>
    </div>
    <script>

        $(function () {
            $('#@(_dialogID)').on('shown.bs.modal', function (e) {
                $("#signature").empty();
                $("#signature").jSignature({ 'UndoButton': true, 'sizeRatio': 2  });
            });

            $("#@(_dialogID) button.resign").on('click', function (event) {
                $("#signature").jSignature('reset');
            });

            $("#@(_dialogID) button.btnConfirm").on('click', function (event) {
                if ($("#signature").jSignature('getData', 'native').length < 1) {
                    return;
                }
                var sigData = $("#signature").jSignature("getData");
                if (sigData) {
                    var viewModel = $("#@(_dialogID)").find('input,select,textarea').serializeObject();
                    viewModel.Signature = sigData;
                    if ($global.commitSignature) {
                        $global.commitSignature(viewModel);
                    }
                    $('#@(_dialogID)').modal('hide');
                }
            });
        });

        //æª¢è¦–å¥åº·è²æ˜æ¢æ¬¾
        function showHealthyTerms() {
            $('#termsModal').modal('show');
        }
        //é»é¸åŒæ„è²æ˜
        function agreeTerms() {
            $('#agree').prop('checked', true);
            $('#termsModal').modal('hide');
        }

        $("#terms").scroll(function () {
            var $this = $(this),
                viewH = $(this).height(),//å¯è¦‹é«˜åº¦
                contentH = $(this).get(0).scrollHeight,//å…§å®¹é«˜åº¦
                scrollTop = $(this).scrollTop();//æ»¾å‹•é«˜åº¦
            // if(contentH - viewH - scrollTop <= 100) {

            if (scrollTop / (contentH - viewH) >= 0.95) { //åˆ°é”åº•éƒ¨100pxæ™‚,Radio checked
                $('#checkTerms').prop('checked', true);
            } else {
                $('#checkTerms').prop('checked', false);
                $('#agree').prop('checked', false);
            }
        });

        function scrollBottom() {
            $("#terms").animate({
                scrollTop: $("#terms").get(0).scrollHeight
            }, 800);
        }

        //Infoé¡¯ç¤º
        $(".zmdi.zmdi-info-outline").on("click", function (event) {
            $('#indexInfoModal').modal('show');
        });

    </script>
    @{
        await Html.RenderPartialAsync("~/Views/ConsoleHome/Shared/BSModalScript.cshtml", model: _dialogID);
    }

</div>
<!-- å¥åº·è²æ˜ -->
<div class="modal" id="termsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
     aria-hidden="true">
    <div class="modal-dialog modal-mini" role="document">
        <div class="modal-content">

            <a class="closebutton" data-dismiss="modal"></a>
            <div class="modal-body">
                <div class="scroll-container" id="terms">
                    <h3 class="color-beyond-dark mb-3 letter-spacing-1 font-16">è¬¹è²æ˜ <br /><small>I hereby declare that:</small></h3>
                    <ol type="color-beyond-dark opacity-70">
                        <li class="mb-4">
                            æœ¬äººå³å°‡åƒåŠ Beyond Fitness è¶…è¶Šé«”èƒ½P.T / P.I èª²ç¨‹ ï¼Œæœ¬äººç­è§£å¾äº‹ç›¸é—œé«”é©èƒ½è¨“ç·´ä¹‹åˆç†é¢¨éšªï¼Œä¸¦ç¢ºèªç›®å‰èº«é«”ç‹€æ³å¯ä»¥åƒèˆ‡æœ¬æ¬¡èª²ç¨‹ã€‚<br /><small>
                                I am here
                                to participate in the Beyond Fitness P.T / P.I course and I understand the reasonable risks associated with
                                physical fitness training and confirm that I am physically fit to participate in this course.
                            </small>
                        </li>
                        <li class="mb-4">
                            æœ¬äººæ˜ç™½å¦‚å°ç›®å‰èº«é«”ç‹€æ³æ˜¯å¦é©åˆåƒåŠ æœ¬æ¬¡èª²ç¨‹æœ‰ä»»ä½•æ‡·ç–‘ï¼Œæ‡‰åœ¨åƒåŠ æœ¬æ¬¡èª²ç¨‹å‰ï¼Œå¾µè©¢å°ˆæ¥­é†«äº‹äººå“¡ä¹‹æ„è¦‹ã€‚<br /><small>
                                I understand that if I am in any
                                doubt about the suitability of my current physical condition to participate in this
                                course, I should seek the advice of a medical professional before participating in this course.
                            </small>
                        </li>
                        <li class="mb-2">
                            æœ¬äººæ˜ç™½Beyond
                            Fitnessä¹‹æ•™ç·´ä¹‹é«”é©èƒ½è¨“ç·´è¨ˆç•«åŠèª²ç¨‹ä¸­ä¹‹äº¤è«‡èˆ‡è¨è«–ï¼Œä¸¦ä¸èƒ½å–ä»£å°ˆæ¥­é†«äº‹äººå“¡ä¹‹æ„è¦‹ï¼Œä¸”æ˜ç™½Beyondæ•™ç·´æ‰€è¨­è¨ˆä¹‹é«”é©èƒ½è¨“ç·´è¨ˆç•«å‡æ˜¯åŸºæ–¼æœ¬äººå·²æ­éœ²çš„èº«é«”å¥åº·ç‹€æ³è³‡è¨Šæ‰€è¨­è¨ˆçš„ã€‚<br /><small>
                                I
                                understand that any conversations and discussions during the course with my trainers are not a substitute
                                for
                                professional medical advice, and I clearly understand that the fitness programs designed by Beyond Fitness
                                trainers are
                                based on the information about my health condition that I have already disclosed.
                            </small>
                        </li>
                    </ol>
                </div>
                <div class="text-center mt-3">
                    <a href="javascript:scrollBottom();" class="btn-link"><i class="zmdi zmdi-caret-down-circle m-r-5"></i>è«‹é–±è®€åˆ°æœ€ä¸‹æ–¹</a>
                </div>
                <div class="text-center mt-3">
                    <button type="button" class="btn btn-darkteal btn-round waves-effect" onclick="javascript:agreeTerms();">æˆ‘åŒæ„ä»¥ä¸Šè²æ˜</button>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- å¥åº·è²æ˜ -->
<div class="modal" id="indexInfoModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
     aria-hidden="true">
    <div class="modal-dialog modal-mini" role="document">
        <div class="modal-content">
            <div class="modal-header bg-darkteal">
                <h5>æŒ‡æ•¸èªªæ˜</h5>
                <a class="closebutton" data-dismiss="modal"></a>
            </div>
            <div class="modal-body bg-darkteal">
                <div class="d-flex justify-content-center">
                    <div class="m-auto m-lg-4 m-md-3 text-center">
                        <h1 class="font-40">ğŸ˜ƒ</h1>
                        <strong class="font-14 opacity-50 color-theme letter-spacing-1">10åˆ†</strong>
                    </div>
                    <div class="m-auto m-lg-4 m-md-3 text-center">
                        <h1 class="font-40">ğŸ˜Š</h1>
                        <strong class="font-14 opacity-50 color-theme letter-spacing-1">8åˆ†</strong>
                    </div>
                    <div class="m-auto m-lg-4 m-md-3 text-center">
                        <h1 class="font-40">ğŸ˜</h1>
                        <strong class="font-14 opacity-50 color-theme letter-spacing-1">5åˆ†</strong>
                    </div>
                    <div class="m-auto m-lg-4 m-md-3 text-center">
                        <h1 class="font-40">ğŸ˜–</h1>
                        <strong class="font-14 opacity-50 color-theme letter-spacing-1">3åˆ†</strong>
                    </div>
                    <div class="m-auto m-lg-4 m-md-3 text-center">
                        <h1 class="font-40">ğŸ˜«</h1>
                        <strong class="font-14 opacity-50 color-theme letter-spacing-1">1åˆ†</strong>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

